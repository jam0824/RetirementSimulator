# 老後資金シミュレーター

老後の資金計画をシミュレーションできるWebアプリケーションです。

## 🔒 プライバシー重視

**ネットワーク通信をせずローカルで動くので安心してください**  
このアプリケーションは完全にオフラインで動作し、あなたの個人的な財務情報が外部に送信されることはありません。すべての計算はブラウザ内で行われます。

## ✨ 機能

### 📊 包括的なライフサイクル計算
- **現役期間**: 給与収入と投資積立（転職・昇進による年収変更対応）
- **退職後～年金開始期間**: 退職後収入でのつなぎ期間
- **年金受給期間**: 年金収入での老後生活

### 💰 詳細な手取り計算
- 社会保険料（14%）
- 所得税（累進課税）
- 住民税（10%）
- 基礎控除（48万円）を考慮した正確な手取り計算

### 📈 投資シミュレーション
- 現役時の投資率設定
- 年利回りの複利計算
- 現金不足時の投資資産取り崩し機能

### 💼 キャリア変更対応
現実的なキャリアパスをシミュレーション：
- **転職**: 年齢を指定して年収変更
- **昇進・昇格**: 段階的な年収アップ
- **複数設定**: 何度でも年収変更可能
- **トグル表示**: 設定画面の表示/非表示切り替え

### 🎲 ランダムイベント
以下のような突発的な支出をシミュレーション：
- 入院・医療費
- 家電故障・車検
- 冠婚葬祭
- 引越し費用 など

## 🚀 使い方

### 1. アプリケーションの起動
1. `retirement_simulator.html` をブラウザで開く
2. 設定項目を入力
3. 「開始」ボタンをクリック

### 2. 設定項目

| 項目 | 説明 | 初期値 |
|------|------|--------|
| シミュレーション開始年齢 | 計算を始める年齢 | 30歳 |
| 退職年齢 | 仕事を辞める年齢 | 65歳 |
| 年金開始年齢 | 年金受給開始年齢 | 65歳 |
| 退職後収入（月額） | 退職後～年金開始期間の収入 | 0円 |
| 給与（年収） | 現役時の基本年収 | 300万円 |
| 📈 給与変更設定 | 転職・昇進による年収変更 | （オプション）|
| 年金月額 | 年金の月額 | 14.5万円 |
| 開始時貯金 | 最初の現金残高 | 100万円 |
| 開始時投資残高 | 最初の投資残高 | 0円 |
| 現役時生活費（月額） | 現役時の月々の支出 | 15.6万円 |
| 退職～年金開始期間の生活費（月額） | つなぎ期間の月々の支出 | 22.8万円 |
| 老後生活費（月額） | 年金受給期間の月々の支出 | 22.8万円 |
| 投資率（%） | 手取りの何%を投資に回すか | 20% |
| 利回り（年%） | 投資の年利回り | 4% |
| イベント発生率（月%） | 突発的支出の発生確率 | 1% |

### 3. 給与変更設定の使い方
キャリア変更を反映するには：
1. 「📈 給与変更設定を表示/非表示」をクリック
2. 「➕ 給与変更を追加」で新しい設定を追加
3. 年齢と年収を入力（例：35歳から400万円）
4. 複数の変更点を設定可能
5. 不要な設定は「削除」ボタンで除去

### 4. 結果の見方
シミュレーション結果では以下が月ごとに表示されます：
- 収入（給与/退職後収入/年金）
- 生活費
- 突発的なイベント
- 現金・投資・総資産の残高
- 年収変更時は `[年収: ¥4,000,000]` のように表示

## 🧪 テスト

テストファイル `test_retirement_simulator.html` が付属しています。

### テスト内容
- **手取り計算テスト**: 各年収での正確な手取り計算
- **シミュレーション機能テスト**: 各期間の収入・支出計算
- **投資機能テスト**: 利回り適用と補填機能
- **統合テスト**: 30年間のライフサイクル全体
- **エラーケーステスト**: 異常値での動作確認

### テスト実行方法
1. `test_retirement_simulator.html` をブラウザで開く
2. 自動的にすべてのテストが実行される
3. 結果が色分けで表示される（緑：成功、赤：失敗）

## 📋 ファイル構成

```
RetirementSimulator/
├── retirement_simulator.html    # メインアプリケーション
├── test_retirement_simulator.html    # テストスイート
└── README.md                   # このファイル
```

## 🔧 技術仕様

- **言語**: HTML5 + CSS3 + JavaScript (ES6+)
- **依存関係**: なし（純粋なHTML/CSS/JavaScript）
- **ブラウザ要件**: モダンブラウザ（Chrome, Firefox, Safari, Edge）
- **オフライン動作**: 完全対応

## 💡 使用例

### ケース1: 一般的なサラリーマン
- 年収400万円、65歳退職
- 投資率20%、年利4%
- 年金月額15万円

### ケース2: キャリアアップ型
- 基本年収400万円、30歳で500万円、40歳で700万円
- 投資率25%、年利4%
- 65歳退職、年金月額18万円

### ケース3: 早期退職プラン
- 年収600万円、55歳退職
- 投資率30%、年利5%
- 65歳まで退職後収入5万円

### ケース4: 高収入・晩年退職
- 年収1000万円、70歳退職
- 投資率40%、年利3%
- 年金月額20万円

## ⚠️ 注意事項

- このシミュレーターは目安です。実際の税制や年金制度の変更は考慮されていません
- 投資にはリスクが伴います。過度に楽観的な利回りは避けてください
- 医療費や介護費用など、個人差の大きい支出は別途検討が必要です
- 定期的に設定を見直し、実際の状況に合わせて調整してください

## 📝 ライセンス

このプロジェクトはオープンソースです。自由に使用・改変・再配布できます。

---

安心してご利用ください！すべてローカルで動作し、あなたの大切な財務情報が外部に送信されることはありません。 